<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>task4</title>
</head>
<style>
body {
    padding: 3rem;
}
.show {
    display: flex;
    padding-top: 1rem;
}
.show li {
    width: 40px;
    height: 40px;
    line-height: 40px;
    background-color: red;
    font-size: 16px;
    font-family: "微软雅黑";
    color: #fff;
    text-align: center;
    display: block;
}
.show li + li {
    margin-left: 10px;
}
</style>

<body>
    <div class="main">
        <div class="event" id="event">
            <input type="text" class="input" id="input" value="3">
            <button class="btn" id="left-in">左侧入</button>
            <button class="btn" id="right-in">右侧入</button>
            <button class="btn" id="left-out">左侧出</button>
            <button class="btn" id="right-out">右侧出</button>
        </div>
        <div class="show" id="display">
            <li class="block">10</li>
            <li class="block">3</li>
            <li class="block">7</li>
            <li class="block">12</li>
            <li class="block">12</li>
            <li class="block">30</li>
        </div>
    </div>
    <script type="text/javascript">
    window.onload = function() {
        /**
         * 设置一个随机数
         */
        function setRandValue() {
            var rand = Math.floor(Math.random() * 100)
            document.getElementById('input').value = rand
        }
        var leftIn = document.getElementById('left-in'),
            rightIn = document.getElementById('right-in'),
            leftOut = document.getElementById('left-out'),
            rightOut = document.getElementById('right-out'),
            input = document.getElementById('input'),
            display = document.getElementById('display')
        function createElement() {
            var div = document.createElement('li')
            div.className = 'block'
            var text = document.createTextNode(input.value)
            div.appendChild(text)
            return div
        }
        function checkempty() {
            if (display.children.length == 0) {
                // alert('没有移除的元素了')
                leftOut.disabled = "disabled";
                rightOut.disabled = "disabled";
                return false;
            }else{
                leftOut.disabled = false;
                rightOut.disabled = false;
            }
        }
        // 传统写法
        // leftIn.onclick = function() {
        //     display.insertBefore(createElement(), display.firstChild)
        // 	setRandValue()
        // }
        // rightIn.onclick = function() {
        //     display.appendChild(createElement())
        // 	setRandValue()
        // }
        // leftOut.onclick = function() {
        //     checkempty(this)
        //     display.firstElementChild.remove()
        // }
        // rightOut.onclick = function() {
        //     checkempty(this)
        //     display.lastElementChild.remove()
        // }
        //传统写法
        /**
         * 使用事件代理
         */
        document.getElementById('event').onclick = function(ev) {
                var ev = ev || window.event;
                var target = ev.target || ev.srcElement;
                if (target.nodeName.toLowerCase() == 'button') {
                    switch (target.id) {
                        case 'left-in':
                            display.insertBefore(createElement(), display.firstChild)
                            setRandValue()
                            break;
                        case 'right-in':
                            display.appendChild(createElement())
                            setRandValue()
                            break;
                        case 'left-out':
                            alert('你删除的元素是：'+ display.firstElementChild.innerHTML )
                            display.firstElementChild.remove()
                            break;
                        case 'right-out':
                            alert('你删除的元素是：'+ display.lastElementChild.innerHTML )
                            display.lastElementChild.remove()
                            break;
                    }
                    checkempty()
                }
            }
            /**  
             * 使用事件代理
             */
        display.onclick = function(ev) {
            var ev = ev || window.event;
            var target = ev.target || ev.srcElement;
            if (target.nodeName.toLowerCase() == 'li') {
            	// console.log()
            	alert('你删除的元素是：'+ target.innerHTML )
                target.remove()
            }
            checkempty()
        }
    }
    </script>
</body>

</html>