<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>基础js练习一</title>
</head>
<body>
	<div id="input-num">
		<input type="text" id="input-txt">
		<p id="btn">
		<button class="btn" id="left-in">左侧入</button>
		<button class="btn" id="right-in">右侧入</button>
		<button class="btn" id="left-out">左侧出</button>
		<button class="btn" id="right-out">右侧出</button>
		</p>
	</div>
	<div id="show-num">
	    <ul id="show-list">
	    	 <!-- 在这里添加ul:li,将li 的id 与数组index对应方便存储
	    	 <li id="1"></li>
	    	 <li id="2"></li>-->
	    </ul>
	</div>
	<style>
	    *{
	    	margin: 0;
	    	padding: 0;
	    }
	    #input-num,#show-num{
	    	float: left;
	    	border: 1px solid #d00;
	    	margin: 20px;
	    	padding: 10px;
	    }
	    #show-num{
	    	width:60%;
	    	height:auto;
	    }
		#input-txt{
			height:30px;
			width:95%;
			margin:10px auto;
			padding-left: 2px;
			border-radius: 5px;
			border:1px solid #00d;
		}
        div p{
			width:100%;
			height:30px;
			margin:5px auto;
        }
        p .btn{
        	border:1px solid #00d;
        	background-color: #fff;
        	border-radius: 3px;
        }
        #show-num ul li{
        	height: 30px;
        	width: 30px;
            margin: 5px;
            float: left;
            text-align: center;
            background-color: #0f0;
        }
	</style>
	<script type="text/javascript">
	    //先获取dom节点
	    
		var input_txt=document.getElementById('input-txt').value;
        var uls=document.getElementById('show-list');
        var patt=/\d+/;
        //添加监听事件的处理函数,处理浏览器兼容性
        function addHandler(ele,event,func){
            if(ele.addEventListener){
              ele.addEventListener(event,func);
            }
            else if(ele.attachEvent){
              ele.attachEvent('on'+event,func);
            }
        }
        //判断输入框是否有效
        function input_is_null(){
            if(!patt.test(input_txt.trim()) || input_txt==''){
               alert('请输入数字！');
               input_txt='';
               return true;
            }
            else{return false;}
        }
        //本来想将按钮组成一个对象，然后change_arr（）封装一下：因为有很多重复的动作，然后用call（）将按钮绑到函数的this,但是一直出错，只好先提交参考了大家的做法。
        var li_arr=[];

        function change_arr(){
            if(!input_is_null){
                if(this.id='left-in'){
                  return li_arr.unshift(input_txt);
                }else if(this.id='right-in'){return li_arr.push(input_txt);}
                else if(this.id='left-out'){if(li_arr.length>0){return li_arr.shift(input_txt);}
                       else{alert('没有数据了！请先输入数字！')}}
                else if(this.id='right-out'){if(li_arr.length>0){return li_arr.pop(input_txt);}
                       else{alert('没有数据了！请先输入数字！')}}
               }
            input_txt='';
            render();
        }
        //渲染函数来渲染数组里的值,渲染后每个数组元素都有自己的id以便触发this.click事件
        function render(){
            var str='',i;
            for(i=0;i<li_arr.length;i++){
               var oli=document.createElement('li');
               oli.innerHTML=li_[i];
               oli.setAttribute('index',i);
               uls.appendChild(oli);
            }
        }
        //点击任意数字则删除该数字；可利用event.target先返回触发该事件的节点
        addHandler($('show-list'),'click',function(e){
            var index = e.target.getAttribute('index');
            li_arr.splice(index, 1);
            render();
        })
        //监听btns的点击事件
        var btns=document.getElementsByTagName('button');
        for(var i=0;i<btns.length;i++){
            addHandler(btns[i],'click',change_arr);
            }
        

	</script>
</body>
</html>